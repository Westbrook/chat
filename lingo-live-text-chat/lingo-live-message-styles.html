<dom-module id="lingo-live-message-styles">
  <template>
    <style>
      :host {
        --lingo-live-avatar-size: 40px;
        --iron-image-width: 100%;
        --iron-image-placeholder: {
          background-repeat: no-repeat;
          background-position: center center;
        };
      }

      :host(:not([hidden])) {
        @apply --layout;

        align-items: flex-start;
        flex-wrap: wrap;
      }

      :host([self]) {
        flex-direction: row-reverse;

        --lingo-live-message-content-background-color: var(--lingo-live-message-content-background-color-self, #efefef);
        --lingo-live-message-content-color: var(--lingo-live-message-content-color-self, #444);
        --lingo-live-message-actions-color: var(--lingo-live-message-content-color-self, #444);
      }

      :host([response]) {
        padding: 0 68px;
      }

      local-time {
        width: 100%;
        text-align: right;
        color: var(--lingo-live-user-readable-color, #777);
      }

      lingo-live-avatar {
        flex-shrink: 0;
        font-size: 0.85em;
        margin: 0 var(--lingo-rhythm) 0 0;
      }

      .post-card {
        flex-grow: 1;
        position: relative;
        max-width: 100%;

        @apply --layout;
        @apply --layout-wrap;
        @apply --layout-justified;
      }

      lingo-live-avatar:not([hidden]) + .post-card {
        max-width: calc(100% - var(--lingo-live-avatar-size) - var(--lingo-rhythm));
      }

      lingo-live-message-content {
        flex-basis: 100%;
        flex-shrink: 0;
        position: relative;
        font-size: 0.85em;
        line-height: 1.75;
      }

      lingo-live-message-content::before {
        position: absolute;
        right: 100%;
        top: 10px;
        content: '';
        border-width: 10px;
        border-top-width: 0;
        border-left-width: 0;
        border-color: var(--lingo-live-message-content-background-color, #efefef);
        border-bottom-color: transparent;
        border-style: solid;
      }

      :host([self]) lingo-live-message-content::before {
        right: auto;
        left: 100%;
        border-left-width: 10px;
        border-right-width: 0;
      }

      .media {
        width: 100%;
      }

      iron-image {
        width: 100%;
        height: 0;
        display: block;
        padding-bottom: 117%; /* Hack for lack of data in api */
      }

      marked-element p {
        margin: 0;
      }

      marked-element a {
        color: var(--ling-live-message-link-color, #4a90e2);
      }

      marked-element a:hover {
        text-decoration: none;
      }

      marked-element img {
        max-width: 100%;
        height: auto;
      }

      lingo-live-user-readable,
      lingo-live-time-since,
      local-time {
        font-weight: bold;
        font-size: 0.8em;
        line-height: 1.2rem;
      }

      lingo-live-time-since {
        font-size: 0.75em;
      }

      [hidden] {
        display: none !important;
      }
    </style>
  </template>
</dom-module>
